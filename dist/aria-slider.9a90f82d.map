{"version":3,"sources":["aria-slider.js"],"names":["RAIL_WIDTH","THUMB_WIDTH","KEYCODES","template","document","createElement","innerHTML","ARIASlider","attachShadow","mode","shadowRoot","appendChild","content","cloneNode","addEventListener","_onFocus","_onBlur","$thumb","querySelector","_onKeyDown","bind","_onMouseDown","event","$rail","classList","add","remove","_moveSliderTo","getAttribute","flag","currentVal","currentValue","keyCode","left","down","right","up","pageDown","pageUp","home","get","end","preventDefault","stopPropagation","e","parentNode","target","minValue","maxValue","handleMouseMove","diffX","pageX","offsetLeft","valueNow","parseInt","handleMouseUp","removeEventListener","focus","value","Number","_value","setAttribute","$value","textContent","_onUpdate","eventDetails","JSON","stringify","dispatchEvent","CustomEvent","bubbles","composed","detail","pos","Math","round","style","window","customElements","define"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAC,aAAW;;AAEV,MAAMA,aAAa,GAAnB;;AAEA,MAAMC,cAAc,CAApB;;AAEA,MAAMC,WAAW;AACb,YAAQ,EADK;AAEb,UAAM,EAFO;AAGb,aAAS,EAHI;AAIb,YAAQ,EAJK;AAKb,cAAU,EALG;AAMb,gBAAY,EANC;AAOb,WAAO,EAPM;AAQb,YAAQ;AARK,GAAjB;;AAYA,MAAMC,WAAWC,SAASC,aAAT,CAAuB,UAAvB,CAAjB;AACAF,WAASG,SAAT;;AAnBU,MAgGJC,UAhGI;AAAA;;AAiGR,0BAAc;AAAA;;AAAA;;AAEZ,YAAKC,YAAL,CAAkB,EAACC,MAAM,MAAP,EAAlB;AACA,YAAKC,UAAL,CAAgBC,WAAhB,CAA4BR,SAASS,OAAT,CAAiBC,SAAjB,CAA2B,IAA3B,CAA5B;;AAGA,YAAKC,gBAAL,CAAsB,OAAtB,EAA+B,MAAKC,QAApC;AACA,YAAKD,gBAAL,CAAsB,MAAtB,EAA8B,MAAKE,OAAnC;AACA,UAAIC,SAAS,MAAKP,UAAL,CAAgBQ,aAAhB,CAA8B,QAA9B,CAAb;AACAD,aAAOH,gBAAP,CAAwB,SAAxB,EAAmC,MAAKK,UAAL,CAAgBC,IAAhB,OAAnC;AACAH,aAAOH,gBAAP,CAAwB,WAAxB,EAAqC,MAAKO,YAAL,CAAkBD,IAAlB,OAArC;AAVY;AAWb;;AA5GO;AAAA;AAAA,+BA8GCE,KA9GD,EA8GQ;AACd,YAAMC,QAAQ,KAAKb,UAAL,CAAgBQ,aAAhB,CAA8B,OAA9B,CAAd;AACA,YAAMD,SAAS,KAAKP,UAAL,CAAgBQ,aAAhB,CAA8B,QAA9B,CAAf;AACAK,cAAMC,SAAN,CAAgBC,GAAhB,CAAoB,OAApB;AACAR,eAAOO,SAAP,CAAiBC,GAAjB,CAAqB,OAArB;AACD;AAnHO;AAAA;AAAA,8BAqHAH,KArHA,EAqHO;AACb,YAAMC,QAAQ,KAAKb,UAAL,CAAgBQ,aAAhB,CAA8B,OAA9B,CAAd;AACA,YAAMD,SAAS,KAAKP,UAAL,CAAgBQ,aAAhB,CAA8B,QAA9B,CAAf;AACAK,cAAMC,SAAN,CAAgBE,MAAhB,CAAuB,OAAvB;AACAT,eAAOO,SAAP,CAAiBE,MAAjB,CAAwB,OAAxB;AACD;AA1HO;AAAA;AAAA,0CA4HY;AAClB,aAAKC,aAAL,CAAmB,KAAKC,YAAL,CAAkB,OAAlB,CAAnB;AACD;AA9HO;AAAA;AAAA,iCAiIGN,KAjIH,EAiIU;AAClB,YAAIO,OAAO,KAAX;;AAEA,YAAIC,aAAa,KAAKC,YAAtB;AACA,gBAAQT,MAAMU,OAAd;AACE,eAAK9B,SAAS+B,IAAd;AACA,eAAK/B,SAASgC,IAAd;AACE,iBAAKP,aAAL,CAAmBG,aAAa,CAAhC;AACAD,mBAAO,IAAP;AACA;;AAEF,eAAK3B,SAASiC,KAAd;AACA,eAAKjC,SAASkC,EAAd;AACE,iBAAKT,aAAL,CAAmBG,aAAa,CAAhC;AACAD,mBAAO,IAAP;AACA;;AAEF,eAAK3B,SAASmC,QAAd;AACE,iBAAKV,aAAL,CAAmBG,aAAa,EAAhC;AACAD,mBAAO,IAAP;AACA;;AAEF,eAAK3B,SAASoC,MAAd;AACE,iBAAKX,aAAL,CAAmBG,aAAa,EAAhC;AACAD,mBAAO,IAAP;AACA;;AAEF,eAAK3B,SAASqC,IAAd;AACE,iBAAKZ,aAAL,CAAmB,KAAKa,GAAL,CAAS,UAAT,CAAnB;AACAX,mBAAO,IAAP;AACA;;AAEF,eAAK3B,SAASuC,GAAd;AACE,iBAAKd,aAAL,CAAmB,KAAKa,GAAL,CAAS,UAAT,CAAnB;AACAX,mBAAO,IAAP;AACA;;AAEF;AACE;AAlCJ;;AAqCA,YAAIA,IAAJ,EAAU;AACRP,gBAAMoB,cAAN;AACApB,gBAAMqB,eAAN;AACD;AACA;AA9KO;AAAA;AAAA,mCAgLKC,CAhLL,EAgLQ;AAAA;;AAChB,YAAIC,aAAaD,EAAEE,MAAF,CAASD,UAA1B;AACA,YAAIE,WAAW,KAAKnB,YAAL,CAAkB,KAAlB,CAAf;AACA,YAAIoB,WAAW,KAAKpB,YAAL,CAAkB,KAAlB,CAAf;;AAEA,YAAIqB,kBAAkB,SAAlBA,eAAkB,CAAC3B,KAAD,EAAW;;AAE/B,cAAI4B,QAAQ5B,MAAM6B,KAAN,GAAcN,WAAWO,UAArC;AACA,cAAIC,WAAWN,WAAWO,SAAU,CAACN,WAAWD,QAAZ,IAAwBG,KAAzB,GAAkClD,UAA3C,CAA1B;AACA,iBAAK2B,aAAL,CAAmB0B,QAAnB;;AAEA/B,gBAAMoB,cAAN;AACApB,gBAAMqB,eAAN;AACD,SARD;;AAUA,YAAIY,gBAAgB,SAAhBA,aAAgB,GAAW;AAC7BnD,mBAASoD,mBAAT,CAA6B,WAA7B,EAA0CP,eAA1C;AACA7C,mBAASoD,mBAAT,CAA6B,SAA7B,EAAwCD,aAAxC;AACD,SAHD;;AAKA;AACAnD,iBAASU,gBAAT,CAA0B,WAA1B,EAAuCmC,eAAvC;;AAEA;AACA7C,iBAASU,gBAAT,CAA0B,SAA1B,EAAqCyC,aAArC;;AAEAX,UAAEF,cAAF;AACAE,UAAED,eAAF;;AAEA;AACAC,UAAEE,MAAF,CAASW,KAAT;AAEC;AAhNO;AAAA;AAAA,oCAkNMC,KAlNN,EAkNa;AACnB,YAAIX,WAAWY,OAAO,KAAK/B,YAAL,CAAkB,KAAlB,CAAP,CAAf;AACA,YAAIoB,WAAWW,OAAO,KAAK/B,YAAL,CAAkB,KAAlB,CAAP,CAAf;;AAEA,YAAIgC,SAASD,OAAOD,KAAP,CAAb;;AAEA,YAAIE,SAASb,QAAb,EAAuB;AACrBa,mBAASb,QAAT;AACD;;AAED,YAAIa,SAASZ,QAAb,EAAuB;AACrBY,mBAASZ,QAAT;AACD;;AAED,aAAKjB,YAAL,GAAoB6B,MAApB;AACA,aAAKC,YAAL,CAAkB,OAAlB,EAA2BD,MAA3B;AACA,YAAIE,SAAS,KAAKpD,UAAL,CAAgBQ,aAAhB,CAA8B,QAA9B,CAAb;AACA4C,eAAOC,WAAP,GAAqBH,MAArB;;AAEA;AACA,YAAII,YAAY,KAAKpC,YAAL,CAAkB,WAAlB,CAAhB;AACA,YAAIqC,eAAeC,KAAKC,SAAL,CAAe,EAAET,OAAOE,MAAT,EAAf,CAAnB;AACA,aAAKQ,aAAL,CAAmB,IAAIC,WAAJ,CAAgBL,SAAhB,EAA2B;AAC5CM,mBAAS,IADmC;AAE5CC,oBAAU,IAFkC;AAG5CC,kBAAQP;AAHoC,SAA3B,CAAnB;;AAOA,YAAIQ,MAAMC,KAAKC,KAAL,CAAYf,SAAS5D,UAAV,IAAyBgD,WAAWD,QAApC,CAAX,IAA6D9C,cAAc,CAArF;;AAEA,YAAIgB,SAAS,KAAKP,UAAL,CAAgBQ,aAAhB,CAA8B,QAA9B,CAAb;;AAEAD,eAAO2D,KAAP,CAAa3C,IAAb,GAAuBwC,GAAvB;AAED;AArPO;AAAA;AAAA,yCAuPW,CAElB;AAzPO;;AAAA;AAAA;;AA4PVI,SAAOC,cAAP,CAAsBC,MAAtB,CAA6B,aAA7B,EAA4CxE,UAA5C;AAED,CA9PA,GAAD","file":"aria-slider.9a90f82d.map","sourceRoot":"..","sourcesContent":["(function() {\n\n  const RAIL_WIDTH = 300;\n\n  const THUMB_WIDTH = 8;\n\n  const KEYCODES = {\n      'left': 37,\n      'up': 38,\n      'right': 39,\n      'down': 40,\n      'pageUp': 33,\n      'pageDown': 34,\n      'end': 35,\n      'home': 36\n  };\n\n\n  const template = document.createElement('template');\n  template.innerHTML = `\n  <style>\n:host {\n    --slider-bg: #eee;\n    --slider-border: #888;\n    --slider-thumb-border: var(--slider-border);\n    --slider-thumb-top-border: #666;\n    --slider-thumb-left-border: var(--slider-thumb-top-border);\n    --slider-thumb-bg: #ddd;\n    --slider-thumb-active-bg: #def;\n    --slider-thumb-active-outline: #888;\n    --slider-active-bg: #aaa;\n}\n\n.aria-widget-slider {\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    height: 4em;\n}\n\n.rail {\n    margin: 2px;\n    padding: 1px;\n    background-color: var(--slider-bg);\n    border: 1px solid var(--slider-border);\n    position: relative;\n    top: 2em;\n    height: 4px;\n    width: 300px;\n}\n\n\n\n.rail.focus {\n    background-color: var(--slider-active-bg);\n}\n\n.value  {\n    width:      2em;\n    text-align: right;\n    position: relative;\n    left: 310px;\n    top: 16px;\n}\n\n.thumb  {\n    border: 1px solid var(--slider-thumb-border);\n    border-top-color:  var(--slider-thumb-top-border);\n    border-left-color: var(--slider-thumb-left-border);\n    background-color: var(--slider-thumb-bg);\n    position: relative;\n    width:8px;\n    height:28px;\n    top:-14px;\n}\n\n.thumb.focus,\n.thumb:hover {\n    outline: 2px solid var(--slider-thumb-active-outline);\n    background-color: var(--slider-thumb-active-bg);\n}\n</style>\n<div class=\"aria-widget-slider\">\n   <div class=\"rail\" >\n    <div id=\"idRedValue\"\n           role=\"slider\"\n           tabindex=\"0\"\n           class=\"thumb\"\n           aria-valuemin=\"0\"\n           aria-valuenow=\"0\"\n           aria-valuemax=\"255\"\n           aria-labelledby=\"idRed\">\n      </div>\n  </div>\n  <div class=\"value\">0</div>\n</div>\n`;\n  class ARIASlider extends HTMLElement {\n    constructor() {\n      super();\n      this.attachShadow({mode: 'open'});\n      this.shadowRoot.appendChild(template.content.cloneNode(true));\n\n\n      this.addEventListener('focus', this._onFocus);\n      this.addEventListener('blur', this._onBlur);\n      let $thumb = this.shadowRoot.querySelector('.thumb');\n      $thumb.addEventListener('keydown', this._onKeyDown.bind(this));\n      $thumb.addEventListener('mousedown', this._onMouseDown.bind(this));\n    }\n\n    _onFocus(event) {\n      const $rail = this.shadowRoot.querySelector('.rail');\n      const $thumb = this.shadowRoot.querySelector('.thumb');\n      $rail.classList.add('focus');\n      $thumb.classList.add('focus');\n    }\n\n    _onBlur(event) {\n      const $rail = this.shadowRoot.querySelector('.rail');\n      const $thumb = this.shadowRoot.querySelector('.thumb');\n      $rail.classList.remove('focus');\n      $thumb.classList.remove('focus');\n    }\n\n    connectedCallback() {\n      this._moveSliderTo(this.getAttribute('value'));\n    }\n\n\n    _onKeyDown(event) {\n    var flag = false;\n\n    let currentVal = this.currentValue;\n    switch (event.keyCode) {\n      case KEYCODES.left:\n      case KEYCODES.down:\n        this._moveSliderTo(currentVal - 1);\n        flag = true;\n        break;\n\n      case KEYCODES.right:\n      case KEYCODES.up:\n        this._moveSliderTo(currentVal + 1);\n        flag = true;\n        break;\n\n      case KEYCODES.pageDown:\n        this._moveSliderTo(currentVal - 10);\n        flag = true;\n        break;\n\n      case KEYCODES.pageUp:\n        this._moveSliderTo(currentVal + 10);\n        flag = true;\n        break;\n\n      case KEYCODES.home:\n        this._moveSliderTo(this.get('minValue'));\n        flag = true;\n        break;\n\n      case KEYCODES.end:\n        this._moveSliderTo(this.get('maxValue'));\n        flag = true;\n        break;\n\n      default:\n        break;\n    }\n\n    if (flag) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    }\n\n    _onMouseDown(e) {\n    let parentNode = e.target.parentNode;\n    let minValue = this.getAttribute('min');\n    let maxValue = this.getAttribute('max');\n\n    let handleMouseMove = (event) => {\n\n      let diffX = event.pageX - parentNode.offsetLeft;\n      let valueNow = minValue + parseInt(((maxValue - minValue) * diffX) / RAIL_WIDTH);\n      this._moveSliderTo(valueNow);\n\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    var handleMouseUp = function() {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    // bind a mousemove event handler to move pointer\n    document.addEventListener('mousemove', handleMouseMove);\n\n    // bind a mouseup event handler to stop tracking mouse movements\n    document.addEventListener('mouseup', handleMouseUp);\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Set focus to the clicked handle\n    e.target.focus();\n\n    }\n\n    _moveSliderTo(value) {\n      let minValue = Number(this.getAttribute('min'));\n      let maxValue = Number(this.getAttribute('max'));\n\n      let _value = Number(value);\n\n      if (_value < minValue) {\n        _value = minValue;\n      }\n\n      if (_value > maxValue) {\n        _value = maxValue;\n      }\n\n      this.currentValue = _value;\n      this.setAttribute('value', _value);\n      let $value = this.shadowRoot.querySelector('.value');\n      $value.textContent = _value;\n\n      // Emit custom event;\n      let _onUpdate = this.getAttribute('on-update');\n      let eventDetails = JSON.stringify({ value: _value});\n      this.dispatchEvent(new CustomEvent(_onUpdate, {\n        bubbles: true,\n        composed: true,\n        detail: eventDetails\n      }));\n\n\n      let pos = Math.round((_value * RAIL_WIDTH) / (maxValue - minValue)) - (THUMB_WIDTH / 2);\n\n      let $thumb = this.shadowRoot.querySelector('.thumb');\n\n      $thumb.style.left = `${pos}px`;\n\n    }\n\n    updateARIAValues() {\n\n    }\n  }\n\n  window.customElements.define('aria-slider', ARIASlider);\n\n}());\n"]}